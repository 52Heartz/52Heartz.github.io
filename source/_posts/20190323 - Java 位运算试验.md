---
title: Java 位运算试验
mathjax: true
date: 2019-03-24 00:53:47
updated:
categories:
tags:
urlname: java-bitwise-operation
---

Java 位运算。

<!-- more -->

# 位运算符（移位运算）

左移位：`<<`

右移位：`>>`

特殊的右移位：`>>>`

移位运算符的左操作数是被移的数，右操作数是要移动的位数。

`num << 1` 相当于左移一位，相当于num乘以2。即整体左移移位，低位补0。

`num >> 1` 相当于右移一位，相当于num除以2。即整体右移一位，符号位不动，和符号位相邻的位补上和符号位一样的数。

`num >>> 1` 相当于右移一位，和 `>>` 不同的是，这个运算符会让符号位也一起向右移动。高位补0。

注意：没有 `<<<` 这个运算符。

## 注意

移位运算符本身不是原地运算，也就是说，不能写出一条单独的语句 `a >> 1;`，要写成 `a = a >> 1;`。

或者使用 `>>=` 或者 `>>>=` 或者 `<<=`。也就是写成 `a >>= 1;` 这样。

# 测试代码

```java
class BitwiseTest
{
	public static void main (String[] args)
	{
        // Test <<
		int a = 1;
        System.out.printf("Binary of      1:%s\n", Integer.toBinaryString(a));
        a <<= 1;
        System.out.printf("Binary of   1<<1:%s\n\n",Integer.toBinaryString(a));

        // Test >>
		int b = 2;
        System.out.printf("Binary of      2:%s\n", Integer.toBinaryString(b));
        b >>= 1;
        System.out.printf("Binary of   2>>1:%s\n\n", Integer.toBinaryString(b));

        // Test >>> with positive integer
		int c = 2;
        System.out.printf("Binary of      2:%s\n", Integer.toBinaryString(c));
        c >>>= 1;
        System.out.printf("Binary of  2>>>1:%s\n\n", Integer.toBinaryString(c));

        // Test >>> with negtive integer
		int d = -1;
        System.out.printf("Binary of     -1:%s\n", Integer.toBinaryString(d));
        d >>>= 1;
        System.out.printf("Binary of -1>>>1:%s\n\n", Integer.toBinaryString(d));
	}
}
```

输出的结果：

因为 Java 基本的转换为二进制不能自动高位补零，所以有些是要高位补零的。

```
Binary of      1:1
Binary of   1<<1:10

Binary of      2:10
Binary of   2>>1:1

Binary of      2:10
Binary of  2>>>1:1

Binary of     -1:11111111111111111111111111111111
Binary of -1>>>1:1111111111111111111111111111111
```

