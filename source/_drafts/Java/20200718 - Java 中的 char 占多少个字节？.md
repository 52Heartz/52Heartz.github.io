---
title: Java ä¸­çš„ char å å¤šå°‘ä¸ªå­—èŠ‚ï¼Ÿ
mathjax: true
date: 2020-07-18 15:18:51
updated:
categories:
tags:
urlname: about-java-char
---



<!-- more -->



Java çš„ char æ˜¯ 16 ä½çš„ï¼Œä¹Ÿå°±æ˜¯ 2 ä¸ªå­—èŠ‚ã€‚ä½†æ˜¯å•ä¸ª char åªèƒ½è¡¨ç¤º [Basic Multilingual Plane(BMP)](https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane) ä»¥å†…çš„å­—ç¬¦ã€‚

> The first plane, **plane 0**, the **Basic Multilingual Plane** (**BMP**) contains characters for almost all modern languages, and a large number of [symbols](https://en.wikipedia.org/wiki/Unicode_symbols). A primary objective for the BMP is to support the unification of prior character sets as well as characters for [writing](https://en.wikipedia.org/wiki/Writing). Most of the assigned code points in the BMP are used to encode Chinese, Japanese, and Korean ([CJK](https://en.wikipedia.org/wiki/CJK_characters)) characters.
>
> The High Surrogate (U+D800â€“U+DBFF) and Low Surrogate (U+DC00â€“U+DFFF) codes are reserved for [encoding non-BMP characters in UTF-16](https://en.wikipedia.org/wiki/UTF-16#U+10000_to_U+10FFFF) by using a *pair* of 16-[bit](https://en.wikipedia.org/wiki/Bit) codes: one High Surrogate and one Low Surrogate. A single surrogate code point will never be assigned a character.
>
> 65,472 of the 65,536 code points in this plane have been allocated to a [Unicode block](https://en.wikipedia.org/wiki/Unicode_block), leaving just 64 code points in unallocated ranges (48 code points at 0870..089F and 16 code points at 2FE0..2FEF).



# å…³äº Unicode

Unicode å­—ç¬¦é›†ï¼Œå¯¹äºç›®å‰å·²ç»æ”¶å½•çš„æ¯ä¸€ä¸ªå­—ç¬¦éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ•°å­—è¿›è¡Œå¯¹åº”ã€‚ç›®å‰èŒƒå›´åœ¨ `U+0000` åˆ° `U+10FFFF`



## Surrogate

> The UCS uses surrogates to address characters outside the initial [Basic Multilingual Plane](https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane) without resorting to more-than-16-bit byte representations. There are 1024 "high" surrogates (D800â€“DBFF) and 1024 "low" surrogates (DC00â€“DFFF). By combining a pair of surrogates, the remaining characters in all the other planes can be addressed (1024 Ã— 1024 = 1048576 code points in the other 16 planes). In [UTF-16](https://en.wikipedia.org/wiki/UTF-16), they must always appear in pairs, as a high surrogate followed by a low surrogate, thus using 32 bits to denote one code point.
>
> â€”â€”[Universal Character Set characters - Wikipedia](https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates)

Unicode çš„ (D800â€“DBFF) å’Œ (DC00â€“DFFF) éƒ½æ²¡æœ‰å¯¹åº”æ˜ å°„çš„å­—ç¬¦ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥åš "high" surrogates å’Œ "low" surrogates çš„ã€‚é€šè¿‡ "high" surrogates å’Œ "low" surrogates ä¸¤ä¸ª code unit çš„ç»„åˆï¼Œè¡¨ç¤ºä¸€ä¸ª code pointã€‚



åœ¨ Java 8 çš„ Oracle JVM å®ç°ä¸­ï¼ŒString ç±»åº•å±‚é»˜è®¤ä½¿ç”¨çš„æ˜¯ `char[]` æ•°ç»„ã€‚ç›¸é‚»çš„ä¸¤ä¸ª char å…ƒç´ ï¼Œå¯èƒ½å°±åˆ†åˆ«æ˜¯ "high" surrogates å’Œ "low" surrogatesï¼Œä¸¤ä¸ª char å…ƒç´ å…±åŒç»„åˆæˆä¸€ä¸ªå­—ç¬¦ã€‚



æµ‹è¯•ä»£ç ï¼š

```java
import java.nio.charset.StandardCharsets;

public class Test1 {
    public static void main(String[] args) throws Exception {
        char[] a = new char[1];
        a[0] = 'ä½ ';
        int length = new String("å­—").getBytes("GBK").length;
        System.out.println("\"å­—\".length = " + length);
        System.out.println(Integer.toHexString('ä½ '-0));
        System.out.println('\u4F60');
        System.out.println('\uD800');

        String emoji = "ğŸ˜‚";
        String chineseCharacter = "ä½ ";
        System.out.println(emoji);
        System.out.println(emoji.length());
        System.out.println(emoji.getBytes(StandardCharsets.UTF_16).length);
        System.out.println(chineseCharacter.length());
    }
}

```





# å‚è€ƒèµ„æ–™

1. [Java è¯­è¨€ä¸­ä¸€ä¸ªå­—ç¬¦å å‡ ä¸ªå­—èŠ‚ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/27562173)
2. [å…¶å®ä½ å¹¶ä¸æ‡‚ Unicode - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/53714077)
3. [Universal Character Set characters - Wikipedia](https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates)
4. [UTF-16 - Wikipedia](https://en.wikipedia.org/wiki/UTF-16)
5. [Plane (Unicode) - Wikipedia](https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane)
6. [Character (Java Platform SE 8 )](https://docs.oracle.com/javase/8/docs/api/java/lang/Character.html)
7. [Code point - Wikipedia](https://en.wikipedia.org/wiki/Code_point)
8. [Unicode surrogate programming with the Java language](https://www.ibm.com/developerworks/library/j-unicode/)
9. [Hanifi Rohingya â€” âœ”ï¸ â¤ï¸ â˜… Unicode Character Table](https://unicode-table.com)
10. [[JavaSpecialists 209] - Unicode Redux (1 of 2)](https://www.javaspecialists.eu/archive/Issue209.html) | [[JavaSpecialists 211] - Unicode Redux (2 of 2)](https://www.javaspecialists.eu/archive/Issue211.html)